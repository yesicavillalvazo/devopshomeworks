# Start from a Node.js environment
FROM vm/ubuntu:20.04

# Install Node.js and npm
RUN apt-get update && apt-get install -y curl software-properties-common
RUN curl -sL https://deb.nodesource.com/setup_14.x | bash -
RUN apt-get install -y nodejs

# Optionally, install yarn if you prefer
RUN npm install -g yarn

# Install Angular CLI globally
RUN npm install -g @angular/cli

# Copy your Angular project files into the container
COPY . .

# Install your project dependencies
RUN npm install

# Build your Angular project (adjust the "build" script as needed in your package.json)
RUN ng build --prod

# Install a simple web server to serve your app (you can choose any server you prefer)
RUN npm install -g http-server

# When the environment spins up, serve your Angular application
CMD http-server ./dist/catalogo -p 8080

# Expose the port your app runs on (adjust if you use a different port)
EXPOSE WEBSITE http://localhost:4200

